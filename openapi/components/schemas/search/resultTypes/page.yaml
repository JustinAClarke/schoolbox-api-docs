allOf:
  - $ref: ./common.yaml
  - type: object
    title: Page search result
    properties:
      type:
        enum: [page]
      subtype:
        enum:
          - page.class
          - page.course
          - page.unit
          - page.homepage
          - page.other
      subResults:
        title: Page search sub-result list
        description: |
          A list of search results found within this page.
        readOnly: true
        type: object
        properties:
          data:
            type: array
            items:
              allOf:
                - title: Page search sub-result
                  description: |
                    A single search result within this page.
                  readOnly: true
                  type: object
                  discriminator:
                    propertyName: type
                    mapping:
                      assessment: ./assessment.yaml
                      file: ./file.yaml
                      forum: ./forum.yaml
                      link: ./link.yaml
                      textBox: ./textBox.yaml
                      tile: ./tile.yaml

                - anyOf:
                    - $ref: ./assessment.yaml
                    - $ref: ./file.yaml
                    - $ref: ./forum.yaml
                    - $ref: ./link.yaml
                    - $ref: ./textBox.yaml
                    - $ref: ./tile.yaml

          metadata:
            $ref: ../../listMetadata.yaml
